<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'tenant-primary': '{{ tenant_colors.primary }}',
              'tenant-secondary': '{{ tenant_colors.secondary }}',
              'tenant-accent': '{{ tenant_colors.accent }}',
              'tenant-text': '{{ tenant_colors.text }}',
              'tenant-background': '{{ tenant_colors.background }}',
              'tenant-light': '{{ tenant_colors.light }}',
              'tenant-primary-text': '{{ tenant_colors.primary_text }}'
            },
            fontFamily: {
              'university': ['Inter', 'system-ui', '-apple-system', 'sans-serif']
            }
          }
        }
      }
    </script>
    
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      crossorigin="anonymous"
    />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <title>{% block title %}{{ tenant_name }} - StudentVC{% endblock %}</title>
    <link rel="icon" href="{{ tenant_logo.icon }}" />
  </head>
  <body class="h-full bg-tenant-background font-university">
    <!-- Compact University Navigation -->
    <nav class="bg-white shadow-md border-b-2 border-tenant-primary">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <!-- Ultra Compact Logo and University Name -->
          <div class="flex items-center space-x-1">
            <a href="/" class="flex items-center space-x-1 group">
              <img src="{{ tenant_logo.main }}" alt="{{ tenant_full_name }}" class="h-7 w-auto transition-transform group-hover:scale-105" />
              <div class="flex flex-col">
                <span class="text-xs font-bold text-tenant-text">{{ tenant_name }}</span>
                <span class="text-xs text-gray-500">StudentVC</span>
              </div>
            </a>
          </div>

          <!-- Main Navigation Menu in Header -->
          <div class="hidden md:flex items-center space-x-1">
            <!-- Main Menu Items -->
            <a href="/" class="text-tenant-text hover:text-tenant-primary transition-colors px-1 py-0.5 rounded text-xs font-medium">
              <i class="fas fa-home mr-0.5 text-xs"></i>Home
            </a>
            <a href="/issuer" class="text-tenant-text hover:text-tenant-primary transition-colors px-1 py-0.5 rounded text-xs font-medium">
              <i class="fas fa-id-card mr-0.5 text-xs"></i>Issuer
            </a>
            <a href="/verifier/" class="text-tenant-text hover:text-tenant-primary transition-colors px-1 py-0.5 rounded text-xs font-medium">
              <i class="fas fa-shield-alt mr-0.5 text-xs"></i>Verifier
            </a>
            <a href="/verifier/settings" class="text-tenant-text hover:text-tenant-primary transition-colors px-1 py-0.5 rounded text-xs font-medium">
              <i class="fas fa-cog mr-0.5 text-xs"></i>Settings
            </a>
            <a href="/validate/" class="text-tenant-text hover:text-tenant-primary transition-colors px-1 py-0.5 rounded text-xs font-medium">
              <i class="fas fa-check-circle mr-0.5 text-xs"></i>Validate
            </a>
            
            <!-- Auth Links -->
            <div class="flex items-center space-x-1 ml-2 pl-2 border-l border-gray-300">
              {% if current_user.is_authenticated %}
                <a href="/logout" class="bg-tenant-primary text-tenant-primary-text hover:bg-opacity-90 transition-colors px-2 py-0.5 rounded text-xs font-medium">
                  <i class="fas fa-sign-out-alt mr-0.5 text-xs"></i>Logout
                </a>
              {% else %}
                <a href="/login" class="text-tenant-text hover:text-tenant-primary transition-colors px-1 py-0.5 rounded text-xs font-medium">
                  <i class="fas fa-sign-in-alt mr-0.5 text-xs"></i>Login
                </a>
                <a href="/register" class="bg-tenant-primary text-tenant-primary-text hover:bg-opacity-90 transition-colors px-2 py-0.5 rounded text-xs font-medium">
                  <i class="fas fa-user-plus mr-0.5 text-xs"></i>Register
                </a>
              {% endif %}
            </div>
          </div>

          <!-- Mobile menu button -->
          <div class="md:hidden">
            <button type="button" class="text-tenant-text hover:text-tenant-primary" onclick="toggleMobileMenu()">
              <i class="fas fa-bars text-sm"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Mobile Navigation Menu -->
      <div id="mobile-menu" class="hidden md:hidden bg-tenant-light border-t">
        <div class="px-2 py-2 space-y-1">
          <!-- Main Menu Items -->
          <a href="/" class="block px-2 py-1 text-tenant-text hover:text-tenant-primary transition-colors text-xs">
            <i class="fas fa-home mr-1"></i>Home
          </a>
          <a href="/issuer" class="block px-2 py-1 text-tenant-text hover:text-tenant-primary transition-colors text-xs">
            <i class="fas fa-id-card mr-1"></i>Issuer
          </a>
          <a href="/verifier/" class="block px-2 py-1 text-tenant-text hover:text-tenant-primary transition-colors text-xs">
            <i class="fas fa-shield-alt mr-1"></i>Verifier
          </a>
          <a href="/verifier/settings" class="block px-2 py-1 text-tenant-text hover:text-tenant-primary transition-colors text-xs">
            <i class="fas fa-cog mr-1"></i>Settings
          </a>
          <a href="/validate/" class="block px-2 py-1 text-tenant-text hover:text-tenant-primary transition-colors text-xs">
            <i class="fas fa-check-circle mr-1"></i>Validate
          </a>
          
          <!-- Auth Links -->
          <div class="border-t border-gray-300 pt-1 mt-1">
            {% if current_user.is_authenticated %}
              <a href="/logout" class="block px-2 py-1 text-tenant-text hover:text-tenant-primary transition-colors text-xs">
                <i class="fas fa-sign-out-alt mr-1"></i>Logout
              </a>
            {% else %}
              <a href="/login" class="block px-2 py-1 text-tenant-text hover:text-tenant-primary transition-colors text-xs">
                <i class="fas fa-sign-in-alt mr-1"></i>Login
              </a>
              <a href="/register" class="block px-2 py-1 text-tenant-text hover:text-tenant-primary transition-colors text-xs">
                <i class="fas fa-user-plus mr-1"></i>Register
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    </nav>

    <!-- Compact Flash Messages -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-2">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="mb-2 p-2 rounded {% if category == 'error' %}bg-red-50 text-red-800 border border-red-200{% elif category == 'warning' %}bg-yellow-50 text-yellow-800 border border-yellow-200{% else %}bg-green-50 text-green-800 border border-green-200{% endif %} flex items-center justify-between text-sm">
              <div class="flex items-center">
                <i class="{% if category == 'error' %}fas fa-exclamation-circle{% elif category == 'warning' %}fas fa-exclamation-triangle{% else %}fas fa-check-circle{% endif %} mr-1 text-xs"></i>
                {{ message }}
              </div>
              <button type="button" class="ml-2 text-gray-400 hover:text-gray-600" onclick="this.parentElement.remove()">
                <i class="fas fa-times text-xs"></i>
              </button>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}
    </div>

    <!-- Compact Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
      {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-tenant-light border-t mt-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="text-center text-sm text-gray-600">
          <p>&copy; 2024 {{ tenant_full_name }} - StudentVC Platform</p>
          <p class="mt-2">Secure Verifiable Credentials for Academic Identity</p>
        </div>
      </div>
    </footer>

    <!-- JavaScript -->
    <script>
      function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        menu.classList.toggle('hidden');
      }

      // Auto-hide flash messages after 5 seconds
      setTimeout(() => {
        document.querySelectorAll('[class*="bg-red-50"], [class*="bg-yellow-50"], [class*="bg-green-50"]').forEach(el => {
          if (el.parentElement) {
            el.style.transition = 'opacity 0.5s';
            el.style.opacity = '0';
            setTimeout(() => el.remove(), 500);
          }
        });
      }, 5000);
    </script>

    {% block javascript %}{% endblock %}
  </body>
</html>
